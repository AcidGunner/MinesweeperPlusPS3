<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_9</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>-10</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///The Nine.
// The entire script of 9 WAS NOT MADE BY AI.

image_speed=0;
test_0=-1;
angle=0;
go_angle=0;
test_a = 0;
travel = 0;
scale=1;
z_win=0;
gold_flag=0;

grid_w = obj_game.grid_w;
grid_h = obj_game.grid_h;
boss_x = obj_game.grid_w div 2;
boss_y = obj_game.grid_h div 2;

dx=0;dy=0;

mine_1_g=-1;mine_2_g=-1;mine_3_g=-1;
mine_4_g=-1;mine_6_g=-1;
mine_7_g=-1;mine_8_g=-1;mine_9_g=-1;

mine_1_r=false;mine_2_r=false;mine_3_r=false;
mine_4_r=false;mine_6_r=false;
mine_7_r=false;mine_8_r=false;mine_9_r=false;

move_timer = 0;
move_delay = irandom_range(30, 90);

active = false;

stop = 0;
hsp = 0;
cutscene_explosions = 4;

the_spr_9spike=spr_9spike;
the_spr_9=spr_9;

if obj_game.cirno9=true &amp;&amp; global.stage==9 secret_script_p2();

if global.foughtcirno==true &amp;&amp; global.stage==910 secret_script_p2();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>gold_flag=1;
audio_play_sound(sfx_flag,2,false);
alarm[8]=90;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Auto-flag remaining mines
for (var fx = 0; fx &lt; obj_game.grid_w; fx++)
for (var fy = 0; fy &lt; obj_game.grid_h; fy++)
{
    if (obj_game.grid[# fx, fy] == -1)
        obj_game.flagged[# fx, fy] = true;
}
obj_game.win=true;
mines_left = 0;
if global.stage==9 audio_play_sound(global.stage9_win,0,false);
else audio_play_sound(global.stage10_win,0,false);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scale=0.99;
audio_play_sound(sfx_defeat,1,false);
alarm[9]=210;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>z_win=1;
audio_play_sound(sfx_spikes,1,false);
alarm[7]=55;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Win check?
with obj_game scr_check_win();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if dx != 0 view_xview[0]=2*-dx;
if dy != 0 view_yview[0]=2*-dy;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>cutscene_explosions--;
//show_debug_message(string(cutscene_explosions));
instance_create(x,y,obj_explosion)
if cutscene_explosions==3 obj_ui.alarm[2]=1;
if cutscene_explosions==0 obj_ui.alarm[3]=1;
if cutscene_explosions!=0 alarm[3]=9;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>travel = 1;
audio_play_sound(sfx_saw,1,false);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>obj_game.spiral_go=true;
audio_play_sound(sfx_spin,1,false);
go_angle=1;
alarm[2]=20;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>test_0=0;
audio_play_sound(sfx_spikes,1,false);
alarm[1]=80;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Show?
if image_index&gt;=5
{
    image_speed=0;
    image_index=5;
}

if z_win==0
{
    if test_0&gt;=0 &amp;&amp; test_0&lt;48 test_0+=3;
}
else
{
    if test_0&gt;0 &amp;&amp; test_0&lt;=48 test_0-=3;
}

var g_o_x = obj_game.grid_offset_x;
var g_o_y = obj_game.grid_offset_y;
var draw_size = obj_game.cell_size * obj_game.zoom;
var d_s = draw_size;
var h_s = 0.5 * d_s;
var x_s = boss_x * d_s;
var y_s = boss_y * d_s;

if stop = 0
{
    if go_angle=1
    {
        test_a=lerp(test_a,20,0.02);
        angle-=test_a;
        if test_a&gt;19.8 go_angle=2;
    }
    else if go_angle=2
    {
        test_a=lerp(test_a,1,0.04);
        angle-=test_a;
        if test_a&lt;=1 go_angle=0;
    }
    else angle-=test_a
}
else
{
    test_a=lerp(test_a,0,0.02);
    angle-=test_a;
}

if travel = 1
{
    hsp=lerp(hsp,10,0.1);
    x+=hsp;
    if x&gt;360 &amp;&amp; y==145
    {
        x=-40;
        y=24;
        obj_smiley.alarm[2]=8;
        alarm[3]=8;
    }
    else if x&gt;360 &amp;&amp; y==24
    {
        x=-40;
        y=145;
        travel = 2;
    }
}
else if travel = 2
{
    x=lerp(x,160,0.1);
    if x&gt;=159.9 travel=3;
}
else if travel = 3
{
    x = g_o_x + x_s + h_s;
    y = g_o_y + y_s + h_s;
}

if active
{
    view_xview[0]=lerp(view_xview[0],0,0.1);
    view_yview[0]=lerp(view_yview[0],0,0.1);
}

if scale&lt;1 scale=lerp(scale,0,0.05);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Mechanics?
if (!active) exit;

var grid = obj_game.grid;
var reveal = obj_game.reveal;
var flagged = obj_game.flagged;

// Wait until next move
if (move_timer &gt; 0) {
    move_timer -= 1;
    exit;
}

var tempgrid_0=0;
var tempgrid_1=0;
var tempgrid_2=0;
var tempgrid_3=0;
var tempgrid_4=0;
var tempgrid_5=0;

// --- PICK RANDOM DIRECTION ---
var dir = irandom(3); // 0=right,1=left,2=down,3=up
dx = 0;
dy = 0;
switch (dir) {
    case 0: dx = 1; dy = 0; break;  // right
    case 1: dx = -1; dy = 0; break; // left
    case 2: dx = 0; dy = 1; break;  // down
    case 3: dx = 0; dy = -1; break; // up
}


// --- CALCULATE TARGET BOSS POSITION ---
var nx = boss_x + dx;
var ny = boss_y + dy;

// Prevent boss from going out of grid (leave 1-tile margin for surrounding mines)
if (nx &lt; 2 || nx &gt;= grid_w-2 || ny &lt; 2 || ny &gt;= grid_h-2) {
    move_timer = 5; // wait a bit before trying again
    exit;
}

if dx=1
{
    tempgrid_0=grid[# boss_x+2, boss_y+1];
    tempgrid_1=grid[# boss_x+2, boss_y];
    tempgrid_2=grid[# boss_x+2, boss_y-1];
    tempgrid_3=reveal[# boss_x+2, boss_y+1];
    tempgrid_4=reveal[# boss_x+2, boss_y];
    tempgrid_5=reveal[# boss_x+2, boss_y-1];
}
else if dx=-1
{
    tempgrid_0=grid[# boss_x-2, boss_y+1];
    tempgrid_1=grid[# boss_x-2, boss_y];
    tempgrid_2=grid[# boss_x-2, boss_y-1];
    tempgrid_3=reveal[# boss_x-2, boss_y+1];
    tempgrid_4=reveal[# boss_x-2, boss_y];
    tempgrid_5=reveal[# boss_x-2, boss_y-1];
}
else
{
    if dy=1
    {
        tempgrid_0=grid[# boss_x-1, boss_y+2];
        tempgrid_1=grid[# boss_x, boss_y+2];
        tempgrid_2=grid[# boss_x+1, boss_y+2];
        tempgrid_3=reveal[# boss_x-1, boss_y+2];
        tempgrid_4=reveal[# boss_x, boss_y+2];
        tempgrid_5=reveal[# boss_x+1, boss_y+2];
    }
    else if dy=-1
    {
        tempgrid_0=grid[# boss_x-1, boss_y-2];
        tempgrid_1=grid[# boss_x, boss_y-2];
        tempgrid_2=grid[# boss_x+1, boss_y-2];
        tempgrid_3=reveal[# boss_x-1, boss_y-2];
        tempgrid_4=reveal[# boss_x, boss_y-2];
        tempgrid_5=reveal[# boss_x+1, boss_y-2];
    }
}
// --- MOVE BOSS ---
boss_x = nx;
boss_y = ny;
alarm[4]=1;

// --- PLACE BOSS TILE ---
grid[# boss_x+1, boss_y+1] =mine_1_g;
grid[# boss_x, boss_y+1]   =mine_2_g;
grid[# boss_x-1, boss_y+1] =mine_3_g;
grid[# boss_x+1, boss_y]   =mine_4_g;
grid[# boss_x, boss_y]     =-2;
grid[# boss_x-1, boss_y]   =mine_6_g;
grid[# boss_x+1, boss_y-1] =mine_7_g;
grid[# boss_x, boss_y-1]   =mine_8_g;
grid[# boss_x-1, boss_y-1] =mine_9_g;

reveal[# boss_x+1, boss_y+1] =mine_1_r;
reveal[# boss_x, boss_y+1]   =mine_2_r;
reveal[# boss_x-1, boss_y+1] =mine_3_r;
reveal[# boss_x+1, boss_y]   =mine_4_r;
reveal[# boss_x, boss_y]     =true;
reveal[# boss_x-1, boss_y]   =mine_6_r;
reveal[# boss_x+1, boss_y-1] =mine_7_r;
reveal[# boss_x, boss_y-1]   =mine_8_r;
reveal[# boss_x-1, boss_y-1] =mine_9_r;

// --- PLACE TEMP TILES! ---
if dx=1
{
    grid[# boss_x-2, boss_y+1]=tempgrid_0;
    grid[# boss_x-2, boss_y]=tempgrid_1;
    grid[# boss_x-2, boss_y-1]=tempgrid_2;
    reveal[# boss_x-2, boss_y+1]=tempgrid_3;
    reveal[# boss_x-2, boss_y]=tempgrid_4;
    reveal[# boss_x-2, boss_y-1]=tempgrid_5;
}
else if dx=-1
{
    grid[# boss_x+2, boss_y+1]=tempgrid_0;
    grid[# boss_x+2, boss_y]=tempgrid_1;
    grid[# boss_x+2, boss_y-1]=tempgrid_2;
    reveal[# boss_x+2, boss_y+1]=tempgrid_3;
    reveal[# boss_x+2, boss_y]=tempgrid_4;
    reveal[# boss_x+2, boss_y-1]=tempgrid_5;
}
else
{
    if dy=1
    {
        grid[# boss_x-1, boss_y-2]=tempgrid_0;
        grid[# boss_x, boss_y-2]=tempgrid_1;
        grid[# boss_x+1, boss_y-2]=tempgrid_2;
        reveal[# boss_x-1, boss_y-2]=tempgrid_3;
        reveal[# boss_x, boss_y-2]=tempgrid_4;
        reveal[# boss_x+1, boss_y-2]=tempgrid_5;
    }
    else if dy=-1
    {
        grid[# boss_x-1, boss_y+2]=tempgrid_0;
        grid[# boss_x, boss_y+2]=tempgrid_1;
        grid[# boss_x+1, boss_y+2]=tempgrid_2;
        reveal[# boss_x-1, boss_y+2]=tempgrid_3;
        reveal[# boss_x, boss_y+2]=tempgrid_4;
        reveal[# boss_x+1, boss_y+2]=tempgrid_5;
    }
}

audio_play_sound(sfx_9move,6,false);
audio_play_sound(sfx_9stop,6,false);
test_a = -test_a;
angle = -angle;
obj_game.alarm[4]=1;

// --- RANDOM DELAY UNTIL NEXT MOVE ---
if obj_game.cirno9==true move_timer = irandom_range(15, 50)
else move_timer = irandom_range(20, 60);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var spike = obj_game.zoom/8;
var test_1 = (test_0*spike)/48;

sprite_index=the_spr_9;

if gold_flag=0
{
    if test_0&gt;=0 &amp;&amp; test_0&lt;48 draw_sprite_ext(the_spr_9spike,0,x,y,test_1,test_1,angle,c_white,1);
    else if test_0==48 draw_sprite_ext(the_spr_9spike,0,x,y,spike,spike,angle,c_white,1);
    
    image_xscale=(obj_game.zoom-0.05)*scale;
    image_yscale=(obj_game.zoom-0.05)*scale;
    image_blend=c_white;
    
    draw_self();
}
else
{
    var g_o_x = obj_game.grid_offset_x;
    var g_o_y = obj_game.grid_offset_y;
    var draw_size = obj_game.cell_size * obj_game.zoom;
    var d_s = draw_size;
    var h_s = 0.5 * d_s;
    var x_s = boss_x * d_s;
    var y_s = boss_y * d_s;
    
    x = g_o_x + x_s + h_s;
    y = g_o_y + y_s + h_s;
    
    image_xscale=obj_game.zoom;
    image_yscale=obj_game.zoom;
    draw_sprite_ext(spr_gold_flag,obj_game.image_index,x,y,image_xscale,image_yscale,0,c_white,1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
